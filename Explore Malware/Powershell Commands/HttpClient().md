

---

## 1. **How They’re Used (Syntax-wise)**

**[[New-Object Net.WebClient]]**

powershell

`$wc = New-Object Net.WebClient $wc.DownloadString("https://example.com")`

Simple, but everything runs synchronously by default—meaning: app waits until it's done. Great for scripts, not for performance.

**HttpClient:**

csharp

Copy code

`var client = new HttpClient(); var response = await client.GetStringAsync("https://example.com");`

Async-first and highly configurable. Good for serious apps, web services, and anyone not wanting to lock up their UI/app/server.

---

## 2. **Underlying Tech and Modern Relevance**

- **WebClient:**
    
    - Wraps around `HttpWebRequest`/`HttpWebResponse`.
    - Doesn't allow fine-grained control over requests.
    - Lacks modern protocol support (WebSockets, custom HTTP methods, etc.)
    - Deprecated in .NET 6+. Even Microsoft says: _Move on, kids!_
- **HttpClient:**
    
    - Built for composability and extensibility (handler pipelines!).
    - Handles cookies, headers, timeouts, retries much better.
    - Supports HTTP/2+ and all the trendy security features (TLS, SNI, etc.).
    - Encourages singleton reuse.
    - Warning: If you create too many, you exhaust sockets (“socket exhaustion,” anyone?).

---

## 3. **Security Perspective**

- **WebClient:**
    
    - Easier to spot in legacy malware/payloads.
    - Limited options for client certificates, proxy, custom headers—often a fingerprint for unsophisticated attackers/scripts.
- **HttpClient:**
    
    - More advanced threats use HttpClient for flexible, harder-to-detect communication.
    - Supports advanced evasion tricks: User-Agent rotation, custom headers, handling redirects, etc.
    - Better at blending in with legit cloud traffic.

**Fun future-worry:**  
As malware gets more advanced, expect `HttpClient` to dominate. Watch those EDR/SOC dashboards for suspicious async HTTP calls!

---

## 4. **When Should You Use Which?**

- **WebClient:**
    
    - Only for maintenance on creaky, ancient codebases.
    - Not recommended for new work (unless you’re time-traveling).
- **HttpClient:**
    
    - The obvious choice for all new .NET and PowerShell developments.
    - One client per app for efficiency (don’t use `using` on every request inside loops!).

---

## 5. **PowerShell Angle**

- **WebClient:** Available natively pre-PowerShell 7, easy for simple scripts.
- **HttpClient:** Needs a little more ceremony in PowerShell, but coming to a module/script near you as PowerShell aligns with .NET Core.

---

## TL;DR (Yes, another, because security loves redundancy):

- **WebClient:** Grandpa’s HTTP utility (handy but frail, soon to retire).
- **HttpClient:** The modern multitool—faster, smarter, better for security and performance.